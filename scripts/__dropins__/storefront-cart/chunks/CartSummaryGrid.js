/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as t,Fragment as l}from"@dropins/tools/preact-jsx-runtime.js";import{useState as y,useEffect as h}from"@dropins/tools/preact-compat.js";import{E as _}from"./EmptyCart.js";import{classes as d,VComponent as C}from"@dropins/tools/lib.js";/* empty css           */import{Image as v}from"@dropins/tools/components.js";import"@dropins/tools/preact-hooks.js";import{g as N}from"./state.js";import{events as b}from"@dropins/tools/event-bus.js";const j=({className:c,children:i,emptyCart:n,products:e,...m})=>t("div",{...m,className:d(["cart-cart-summary-grid",c]),children:t(l,{children:t("div",{className:d(["cart-cart-summary-grid__content",["cart-cart-summary-grid__content--empty",!e]]),children:e||t(C,{node:n,className:"cart-cart-summary-grid__empty-cart"})})})}),D=({children:c,initialData:i=null,routeProduct:n,routeEmptyCartCTA:e,...m})=>{const[s,g]=y(i);h(()=>{const r=b.on("cart/data",a=>{g(a)},{eager:!0});return()=>{r==null||r.off()}},[]);const p=(r,a)=>{const f=r.selectedOptions?`${r.name}: ${Object.entries(r.selectedOptions).join("; ")}`:r.name,o=t(v,{"data-testid":"cart-grid-item-image",loading:a<4?"eager":"lazy",src:r.image.src,alt:r.image.alt,"aria-label":f,width:"100%"});return n?t("div",{className:"cart-cart-summary-grid__item-container",children:t("a",{href:n(r),children:o})},a):o},u=s&&t(l,{children:s.items.map((r,a)=>p(r,a))});return t(j,{...m,emptyCart:t(_,{ctaLinkURL:e?e():void 0}),products:u})};D.getInitialData=async function(){return N()};export{D as C};
